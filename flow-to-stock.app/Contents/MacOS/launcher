#!/bin/bash

export PATH="$HOME/.local/bin:/usr/local/bin:/opt/homebrew/bin:$PATH"

cd "$(dirname "$0")/../../.."

PORT=18501

if lsof -i :$PORT -sTCP:LISTEN >/dev/null 2>&1; then
    open "http://localhost:$PORT"
else
    # バックグラウンドで起動し、スクリプトを即終了（バウンド停止）
    nohup uv run streamlit run app.py --server.port $PORT >/dev/null 2>&1 &
    # Streamlitの起動を待ってからブラウザを開く
    sleep 3
    open "http://localhost:$PORT"
fi
